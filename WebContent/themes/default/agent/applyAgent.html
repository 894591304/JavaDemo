<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
		<link rel="stylesheet" href="${ctx}/themes/default/agent/css/reset.css" />
		<link rel="stylesheet" href="${ctx}/themes/default/agent/css/common.css" />
		<link rel="stylesheet" href="${ctx}/themes/default/agent/css/agent.css" />
		<link rel="stylesheet" href="${ctx}/themes/default/agent/css/zyupload-1.0.0.min.css" />		
		<script type="text/javascript" src="${ctx}/themes/default/agent/js/jquery-3.1.0.min.js" ></script>
		<script src="${ctx}/themes/default/js/jquery-form.js"  type="text/javascript"></script>
		<script type="text/javascript" src="${ctx}/themes/default/js/zyupload.basic-1.0.0.min.js"></script>
		
		<title>申请代理账户</title>
	</head>
	<body>
<#-- 创建会员信息标签 -->
<#assign memberIsLoginTag=newTag("memberIsLoginTag")>
<#-- 调用会员登录标签 -->
<#assign isLogin=memberIsLoginTag()>
	<#if isLogin >
<#-- 创建用户基本信息标签 -->
<#assign userBaseDataTag= newTag("userBaseDataTag") >
<#-- 调用标签获取用户基本信息 -->
<#assign user= userBaseDataTag() >
		<#if user.isCredit!=1>
<#-- 创建手机标签 -->
<#assign mobileTag=newTag("getMobileTag")>
<#-- 调用手机标签 -->
<#assign mobile=mobileTag()>
<#-- 创建用户基本信息标签 -->
<#assign userBaseDataTag= newTag("userBaseDataTag") >
<#-- 调用标签获取用户基本信息 -->
<#assign user= userBaseDataTag() >
		<div class="publicHeader">
		    <span class="f_l headIcon">
				<a href="javascript:" onclick="window.history.back();">
					<img src="${ctx}/themes/default/img/11.png" alt="">
				</a>
			</span>
				申请代理账户
	    </div>
	    <div class="agentWrap">
	    	<div class="agentImgBox">
	    		
	    	</div>
	    	<div class="agentImgContainer">
	    		<div class="agentImg">
	    			<img src="${user.face}" />
	    	    </div>
	    	</div>
	    	<div class="agentInput">
	    		<p class="inputTitle">用户名</p>
	    		<div class="agentAName">
	    			${member.name}
	    		</div>
	    	</div>
		<form action="applyAgent.html" method="post" id="applyAgent_form" >
	    	<div class="agentInput">
	    		<p class="inputTitle">手机号</p>
	    		<div class="inputBox" id="sendmsg">
					<a href="" class="codeBt">发送验证码</a>
					<div class="appliNewInput">
						<input type="text" value="${mobile!''}" name="mobile" id="r_mobile" placeholder="请输入手机号"/>
					</div>		    			
	    		</div>
	    		<div class="inputBox">
					<div class="appliNewInput" >
						<input type="text" name="checkcode" value="" placeholder="输入验证码"/>
					</div>	
	    		</div>
	    	</div>
	    	<div class="agentInput">
	    		<p class="inputTitle">姓名</p>
	    		<div class="appliNewInput">
	    			<input type="text" name ="name" value="" placeholder="请输入姓名"/>
	    		</div>
	    	</div>
	    	<div class="agentInput">
	    		<p class="inputTitle">身份证号码</p>
	    		<div class="appliNewInput">
	    			<input type="text" name ="idCard" value="" placeholder="请输入身份证号码"/>
	    		</div>
	    	</div>
			<div id="zyupload" class="zyupload" style="display:none"></div>
	    	<div class="uploadPc">
	    		<div class="loadBox" id="loadBox">
					<img src="" id="up1img" style="weight:400px; display:none;">
					<input type="hidden" name ="idImg" id="up1url" value="" />
					<div class="webuploader_pick" id="up1">点击上传身份证图片</div>
	    		</div>
	    	</div>
	    	<div class="applyAgree">
	    		<p class="applyAgreeH">以下信息认真填写作为您获得资质的依据</p>
	    		<div class="appliNewBox">
	    			<p class="appliNewBoxH">微博</p>
	    			<div class="appliNews">
	    				<div class="appliNewsName">
	    					微博ID
	    				</div>
	    				<div class="appliNewInput">
	    					<input name ="weibo" value="" type="text" />
	    				</div>
	    			</div>
	    			<div class="appliNews">
	    				<div class="appliNewsName">
	    					粉丝数
	    				</div>
	    				<div class="appliNewInput">
	    					<input name ="fans" value="" type="text" />
	    				</div>
	    			</div>
	    		</div>
	    		<div class="appliNewBox">
	    			<p class="appliNewBoxH">微信</p>
	    			<div class="appliNews">
	    				<div class="appliNewsName">
	    					微信ID
	    				</div>
	    				<div class="appliNewInput">
	    					<input name ="weixin" type="text" />
	    				</div>
	    			</div>
	    			<div class="appliNews">
	    				<div class="appliNewsName">
	    					好友数
	    				</div>
	    				<div class="appliNewInput">
	    					<input name ="friends" value="" type="text" />
	    				</div>
	    			</div>
	    		</div>
	    		<div class="appliNewBox">
	    			<p class="appliNewBoxH">直播平台</p>
	    			<div class="appliNews">
	    				<div class="appliNewsName">
	    					平台名称
	    				</div>
	    				<div class="appliNewInput">
	    					<input name ="live" value="" type="text" />
	    				</div>
	    			</div>
	    			<div class="appliNews">
	    				<div class="appliNewsName">
	    					ID
	    				</div>
	    				<div class="appliNewInput">
	    					<input name ="liveId" value="" type="text" />
	    				</div>
	    			</div>
	    			<div class="appliNews">
	    				<div class="appliNewsName">
	    					粉丝数
	    				</div>
	    				<div class="appliNewInput">
	    					<input name ="liveFans" value="" type="text" />
	    				</div>
	    			</div>
	    		</div>
				<div class="agentNewBt" id="applyAgent_submit">
					<a href="javascript:;" class="agentNewBtRt">确认提交</a>
				</div>
	    	</div>
		</form>	
	    </div>
	<#else>
	<script language='javascript'>
	document.location = "${ctx}/index.html"
	</script>
	</#if>	
<#else>
	<script language='javascript'>document.location = "${ctx}/index.html"</script>
</#if>
	</body>
<script type="text/javascript">
			var clickid;
			$(function(){			
			});

 $(function(){
	 var options = {
			url : "${ctx}/shop/ext/credit!submit.do" ,
			type : "POST",
			dataType : 'json',
			success : function(result) {
 				if(result.result==1){
	 				location.href="${ctx}/user.html";
	 			}else{
	 				alert(result.message);
		 		} 
			},
			error : function(e) {
				alert("您输入的信息有误或不完整！");
			}
	};
	$("#applyAgent_submit a").click(function(){
		$('#applyAgent_form').ajaxSubmit(options);	
	});
	// 初始化插件
	$("#zyupload").zyUpload({
		width            :   "650px",                 // 宽度
		height           :   "400px",                 // 宽度
		itemWidth        :   "140px",                 // 文件项的宽度
		itemHeight       :   "115px",                 // 文件项的高度
		url              :   "/javamall/h5upload.action",  // 上传文件的路径
		fileType         :   ["jpg","png","jpeg","gif","JPG","PNG","JPEG","GIF"],// 上传文件的类型
		fileSize         :   51200000,                // 上传文件的大小
		multiple         :   false,                    // 是否可以多个文件上传
		dragDrop         :   false,                   // 是否可以拖动上传文件
		tailor           :   false,                   // 是否可以裁剪图片
		del              :   true,                    // 是否可以删除文件
		finishDel        :   false,  				  // 是否在上传文件完成后删除预览
		/* 外部获得的回调接口 */
		onSelect: function(selectFiles, allFiles){    // 选择文件的回调方法  selectFile:当前选中的文件  allFiles:还没上传的全部文件
			//console.info("当前选择了以下文件：");
			//console.info(selectFiles);
		},
		onDelete: function(file, files){              // 删除一个文件的回调方法 file:当前删除的文件  files:删除之后的文件
			//console.info("当前删除了此文件：");
			//console.info(file.name);
		},
		onSuccess: function(file, response){          // 文件上传成功的回调方法
			//console.info("此文件上传成功：");
			//console.info(file.name);
			//console.info("此文件上传到服务器地址：");
			//console.info(response);
			//$("#selfile").show();
			//$("#upbtn").hide();
			//$("#uploadInf").append("<p>上传成功，文件地址是：" + response + "</p>");
			$("#"+clickid+"url").val(response);
			$("#"+clickid+"img").attr('src',"${ctx}"+response);
			$("#"+clickid).hide();
			$("#"+clickid+"img").show();
		},
		onFailure: function(file, response){          // 文件上传失败的回调方法
			//console.info("此文件上传失败：");
			alert("文件上传失败！");
			//console.info(file.name);
		},
		onComplete: function(response){           	  // 上传完成的回调方法
			//console.info("文件上传完成");
			//console.info(response);
		}
	});	
});
 
 	$("#sendmsg a").click(function(){
		var input = $("#r_mobile");
		var mobile = input.val();
		if($.trim(mobile)==''){alert("手机号不能为空！");}
		var reg=/^1[3|4|5|8][0-9]\d{4,8}$/; 
		if(!reg.test(mobile)){alert("手机格式不正确！");}		
		$.ajax({
				url:"${ctx}/shop/ext/mobile!sendmsg.do",
				type:"POST",
				data:"mobile="+mobile,
				dataType:"json",
				success:function(json){
					alert("发送成功！");
				}
			});
			return false;
	}); 
</script>
</html>